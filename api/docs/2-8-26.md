# Google OAuth Routes Documentation

Documentation for routes in `api/routes/google_auth.py`

## Routes

### 1. `/api/oauth/google/login`

**Method:** `GET`

**Description:**
Initiates the Google OAuth 2.0 authentication flow. Redirects the user to Google's authentication page where they can authorize the application to access their profile information.

**Takes:**
- No parameters required

**Returns:**
- **Type:** Redirect
- **Description:** Redirects to Google's OAuth consent screen with the following parameters:
  - `client_id`: Application's Google client ID
  - `redirect_uri`: Callback URL for Google to redirect back to
  - `response_type`: Set to "code" for authorization code flow
  - `scope`: Requested permissions (openid, email, profile)
  - `access_type`: Set to "offline" to get refresh token
  - `prompt`: Set to "consent" to force consent screen

---

### 2. `/api/oauth/google/callback`

**Method:** `GET`

**Description:**
Handles the callback from Google after user authentication. Exchanges the authorization code for an access token and retrieves the user's profile information from Google.

**Takes:**
- **Query Parameters:**
  - `code` (string, required): Authorization code provided by Google after user consent

**Returns:**
- **Success (200):**
  ```json
  {
    "id": "google_user_id",
    "email": "user@example.com",
    "verified_email": true,
    "name": "User Name",
    "given_name": "User",
    "family_name": "Name",
    "picture": "https://..."
  }
  ```
  
- **Error (400):**
  - When no code is provided:
    ```json
    {
      "error": "No code returned"
    }
    ```
  - When token exchange fails:
    ```json
    {
      "error": "error_description_from_google"
    }
    ```

**Flow:**
1. Receives authorization code from Google
2. Exchanges code for access token using client credentials
3. Uses access token to fetch user information from Google's userinfo endpoint
4. Returns user profile data

---

## Configuration

The following environment variables are required:
- `GOOGLE_CLIENT_ID`: OAuth client ID from Google Console
- `GOOGLE_CLIENT_SECRET`: OAuth client secret from Google Console

The redirect URI must match the one configured in Google Console: `http://localhost:5000/api/oauth/google/callback`
